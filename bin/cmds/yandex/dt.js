'use strict';/* eslint max-len: 0, no-unused-vars: 0 */var themes=require('../../themes');var tools=require('../../tools');var _=require('lodash');var chalk=require('chalk');var fs=require('fs');var http=require('good-guy-http')();var noon=require('noon');var CFILE=process.env.HOME+'/.toloko.noon';exports.command='dt <query>';exports.desc='Detect language';exports.builder={hint:{alias:'h',desc:'A comma-separated list of the most likely languages (optional)',default:'',type:'string'}};exports.handler=function(argv){tools.checkConfig(CFILE);var config=noon.load(CFILE);var theme=themes.loadTheme(config.theme);if(config.verbose)themes.label(theme,'down','Yandex');var prefix='https://translate.yandex.net/api/v1.5/tr.json/detect?';var ucont=[];ucont.push('key='+process.env.YANDEX);ucont.push('text='+argv.query);if(argv.h!==''){ucont.push('hint='+argv.h);}var url=''+prefix+ucont.join('&');url=encodeURI(url);http({url:url},function(error,response){if(!error&&response.statusCode===200){var body=JSON.parse(response.body);themes.label(theme,'right','Detected language',body.lang);}else{console.log(JSON.stringify(error,null,2));throw new Error(error);}});};